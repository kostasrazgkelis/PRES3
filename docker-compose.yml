version: '3.9'

services:

    front:
        container_name: front_end_alice
        build:
            context: .
            dockerfile: infrastructures/front/Dockerfile
            args:
               - REACT_APP_URI_HOST=http://localhost:9200
               - REACT_APP_OTHER_CLUSTER_URL=http://localhost:9300
               - REACT_APP_HDFS_HOST=http://localhost:9500
               - REACT_APP_NAME_OF_CLUSTER=Cluster A
               - REACT_APP_NAME_OF_CLUSTER_URL=cluster_a
               - REACT_APP_OTHER_CLUSTER=cluster_b
        ports:
            - "3000:3000"
        environment:
            - PORT=3000
            - NAME=front
            - CHOKIDAR_USEPOLLING=true
        restart: always
        env_file:
            - .env
        volumes:
            - ./src/services/front/:/src/react-front/
        networks:
            - back-front-network
        stdin_open: true
        tty: true

    backend:
        container_name: back_end_alice
        build:
            context: .
            args:
                NAME: ${CLUSTER_A}
            dockerfile: infrastructures/app/Dockerfile
        ports:
            - "9200:9200"
        environment:
            - PORT=9200
            - DEBUG=1
            - NAME=${CLUSTER_A}
        restart: always
        env_file:
            - .env
        volumes:
            - ./src/services/app/:/src/app/
            -  shared-workspace:/opt/workspace
        networks:
            - spark-net
            - back-front-network


volumes:
    shared-workspace:
        driver: local

networks:
    spark-net:
        name: spark-net
        external: true
    back-front-network:




