FROM node:alpine

# add arguments #
ARG REACT_APP_URI_HOST
ARG REACT_APP_URI_HOST
ARG REACT_APP_NAME_OF_CLUSTER
ARG REACT_APP_NAME_OF_CLUSTER_URL
ARG REACT_APP_OTHER_CLUSTER
ARG REACT_APP_OTHER_CLUSTER_URL

ENV REACT_APP_URI_HOST=$REACT_APP_URI_HOST
ENV REACT_APP_HDFS_HOST=$REACT_APP_HDFS_HOST
ENV REACT_APP_NAME_OF_CLUSTER=$REACT_APP_NAME_OF_CLUSTER
ENV REACT_APP_NAME_OF_CLUSTER_URL=$REACT_APP_NAME_OF_CLUSTER_URL
ENV REACT_APP_OTHER_CLUSTER=$REACT_APP_OTHER_CLUSTER
ENV REACT_APP_OTHER_CLUSTER_URL=$REACT_APP_OTHER_CLUSTER_URL
# stop argumetns #

WORKDIR /react-front

COPY ./infrastructures/front /react-front

RUN npm install
RUN npm install js-file-download --save

COPY ./src/services/front /react-front

RUN npm run build
CMD ["npm", "start"]